// HexSlide Version beta 2.6 | Copyright (C) 2015 HexCode, Harry Felton.
var _G=_G?_G:{};!function(a,b){_G.variable||(_G.variable={}),_G.preserve||(_G.preserve={}),_G.variable.last_slide_id=0,_G.preserve.slide_done=_G.preserve.slide_done?!0:!1;var e=[],f=[],g={},h={};a.fn.hexSlide=function(c){function B(a,b,d){var e=d?g[d]:c;if(e&&e.debug)switch(a="hexSlide: "+a,b){case"e":console.error(a);break;case"w":console.warn(a);break;case"l":console.log(a);break;default:console.log(a)}}function C(b,c){H(b).done(function(d){B("slide order shuffled"),h[b].shuffle={order:d,current:0},B("timer starting"),e[b]=setInterval(function(){var c,d,e;c=h[b].shuffle.order[h[b].shuffle.current],d=a(c).data("hexslide-id"),a(c).parents(".hexslide").children(".hexslide-slide-container").children(".slide:first").data("hexslide-id")==d&&(h[b].shuffle.current++,c=h[b].shuffle.order[h[b].shuffle.current],d=a(c).data("hexslide-id"),B("advancing slide ahead by 1")),e=a(c).parents(".hexslide").children(".indicator-container").children(".indicator").filter(function(){return a(this).data("hexslide-id")==d}),K.call(e),h[b].shuffle.current++,h[b].shuffle.current>h[b].shuffle.order.length-1&&(h[b].shuffle.current=0,H(b).done(function(a){h[b].shuffle.order=a,B("regenerated slides")}))},c.interval)})}function D(b){var c;c=a("#hexslide-"+b+"-container");var d=g[b];return d.autoPlay?(e[b]&&(clearInterval(e[b]),B("reset timer")),d.shuffle?C(b,d):(B("starting timer"),e[b]=setInterval(function(){I.call(c.find(".hexslide-slide-container"),!0)},d.interval)),void 0):(B("autplay disabled"),void 0)}function E(a){clearTimeout(e[a]),B("timer stopped")}function F(b,d,e,f){if(c=d?d:c,i=e?e:i,f=f?!0:!1,c.navigation&&i.children(".hexslide-control-container").length<=0){var g,h,j,k,l;l=a("<div></div>",{"class":"hexslide-control-container"}),g=a("<div></div>",{"class":"slide-btn right","data-slide-direction":"forward"}),h=a("<div></div>",{"class":"slide-btn left","data-slide-direction":"backward"}),j=a("<span></span>",{text:c.text.next}),k=a("<span></span>",{text:c.text.previous}),c.additionalCSS.nextBtn&&g.css(c.additionalCSS.nextBtn),c.additionalCSS.nextTxt&&j.css(c.additionalCSS.nextTxt),c.additionalCSS.prevBtn&&h.css(c.additionalCSS.prevBtn),c.additionalCSS.prevTxt&&k.css(c.additionalCSS.prevTxt),c.alwaysShowNav||(g.addClass("hide"),h.addClass("hide")),B("appending text to button"),j.appendTo(g),k.appendTo(h),g.appendTo(l),h.appendTo(l),B("buttons appended to panel"),f?(l.insertBefore(i.children(".hexslide-slide-container")),B("instered above hexslide container")):(l.appendTo(i),B("appended to hexslide container"))}if(c.indicators&&i.children(".indicator-container").length<=0){var m,o;m=a("<div></div>",{"class":"indicator-container"}),o=b,B("creating indicators");for(var p=0;p<o.length;p++){var q=a("<span></span>",{"class":"indicator","data-hexslide-id":p}).appendTo(m);0==p&&q.addClass("active")}c.alwaysShowIndicators||m.addClass("hide"),m.css({"max-width":c.width}),f?m.insertBefore(i.children(".hexslide-slide-container")):m.appendTo(i),B("indicators ready")}}function G(a,b){return Math.floor(Math.random()*(b-a+1))+a}function H(b){var c,d,e,f,g;g=a.Deferred(),c=[];var i=a("#hexslide-"+b+"-container");for(d=i.children(".hexslide-slide-container").children(".slide"),e=i.attr("id").split("-")[1],f=h[e],B("generating");;){var j;if(j=G(0,d.length-1),-1==a.inArray(d[j],c)?(c.push(d[j]),B("pushed "+j)):B("ignored "+j),c.length==d.length){g.resolve(c),B("generation complete");break}}return g}function I(b){if(h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving)return B("already animating, ignoring click","w"),void 0;h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!0,b||clearInterval(e[a(this).parents(".hexslide").attr("id").split("-")[1]]);var c=g[a(this).parents(".hexslide").attr("id").split("-")[1]],d=a(this).parents(".hexslide").find(".slide:first"),f=d.data("hexslide-id");f++,f>a(this).parents(".hexslide").find(".slide").length-1&&(f=0,B("new slide greater than total, setting to zero")),"slide"==c.animation?(d.stop().animate({left:d.outerWidth()/-1},c.speed,function(){a(this).hide()}),a(this).parents(".hexslide").find(".slide").filter(function(){return a(this).data("hexslide-id")==f}).stop().css("left",d.outerWidth()).show().animate({left:0},c.speed,function(){h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1}).insertBefore(d)):(d.stop().fadeOut(c.speed),a(this).parents(".hexslide").find(".slide").filter(function(){return a(this).data("hexslide-id")==f}).fadeIn(c.speed,function(){h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1}).insertBefore(d)),c.stopAutoOnNav&&!b?(c.autoPlay=!1,E(a(this).parents(".hexslide").attr("id").split("-")[1]),B("stopped auto as stopAutoOnNav is true")):b||!c.autoPlay||c.pauseOnHover||(E(a(this).parents(".hexslide").attr("id").split("-")[1]),D(a(this).parents(".hexslide").attr("id").split("-")[1]),B("reset timer"));var i=a(this).parents(".hexslide").find(".slide:first").data("hexslide-id");J(i,this)}function J(b,c){a(c).parents(".hexslide").children(".indicator-container").find(".indicator.active").removeClass("active"),a(c).parents(".hexslide").children(".indicator-container").find(".indicator").filter(function(){return a(this).data("hexslide-id")==b}).addClass("active"),B("updated indicators")}function K(){if(h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving)return B("already animating, ignoring click","w"),void 0;h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!0;var b,c,d;d=a(this).data("hexslide-id");var e=g[a(this).parents(".hexslide").attr("id").split("-")[1]];if(b=a(this).parents(".hexslide").find(".slide:first"),c=b.data("hexslide-id"),c==d)return h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1,void 0;if("slide"==e.animation){var f=d>c?b.outerWidth()/-1:b.outerWidth(),i=d>c?b.outerWidth():b.outerWidth()/-1;b.stop().animate({left:f},e.speed,function(){a(this).hide()}),a(this).parents(".hexslide").find(".slide").filter(function(){return a(this).data("hexslide-id")==d}).stop().css("left",i).show().animate({left:0},e.speed,function(){h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1}).insertBefore(b)}else b.stop().fadeOut(e.speed),a(this).parents(".hexslide").find(".slide").filter(function(){return a(this).data("hexslide-id")==d}).stop().fadeIn(e.speed,function(){h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1}).insertBefore(b);J(d,b.parent(".hexslide-slide-container")),e.stopAutoOnNav?(e.autoPlay=!1,E(a(this).parents(".hexslide").attr("id").split("-")[1]),B("stopped auto as stopAutoOnNav is true")):e.autoPlay&&!e.pauseOnHover&&(E(a(this).parents(".hexslide").attr("id").split("-")[1]),D(a(this).parents(".hexslide").attr("id").split("-")[1]),B("reset timer"))}function L(b){if(h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving)return B("already animating, ignoring click","w"),void 0;h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!0,b||clearInterval(e[a(this).parents(".hexslide").attr("id").split("-")[1]]);var c=g[a(this).parents(".hexslide").attr("id").split("-")[1]],d=a(this).parents(".hexslide").find(".slide:first"),f=d.data("hexslide-id");f--,0>f&&(f=a(this).parents(".hexslide").find(".slide").length,f-=1,B("new slide is out of bounds, setting to last slide")),"slide"==c.animation?(d.stop().animate({left:d.outerWidth()},c.speed,function(){a(this).hide()}),a(this).parents(".hexslide").find(".slide").filter(function(){return a(this).data("hexslide-id")==f}).stop().css({left:d.outerWidth()/-1}).show().animate({left:0},c.speed,function(){h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1}).insertBefore(d)):(d.stop().fadeOut(c.speed),a(this).parents(".hexslide").find(".slide").filter(function(){return a(this).data("hexslide-id")==f}).fadeIn(c.speed,function(){h[a(this).parents(".hexslide").attr("id").split("-")[1]].moving=!1}).insertBefore(d)),c.stopAutoOnNav?(a(this).parents(".hexslide").removeClass("hexslide-hover"),E(a(this).parents(".hexslide").attr("id").split("-")[1]),B("stopped auto as stopAutoOnNav is true")):c.autoPlay&&!c.pauseOnHover&&(E(a(this).parents(".hexslide").attr("id").split("-")[1]),D(a(this).parents(".hexslide").attr("id").split("-")[1]),B("reset timer"));var i=a(this).parents(".hexslide").find(".slide:first").data("hexslide-id");J(i,this)}var d,i,j,k,m,n,o,p,l=this.filter(function(){return a(this).data("slideshow-src")||a(this).hasClass("hexslide")});B("Plugin started - Debug Mode"),m=_G.variable.last_slide_id?_G.variable.last_slide_id:0,B("_G loaded");for(var q=0;q<l.length;q++)if(a(l[q]).hasClass("hexslide")){B("slideshow found, extend settings "+r);var s,r=a(l[q]).attr("id").split("-")[1];if(s=g[r]){B("extending settings from "+s);var t;t=a.extend(!0,{},a.fn.hexSlide.defaults,s,c),c=t,E(r);var u;t.speed+100>t.interval&&(console.warn("hexSlide Warning: The interval you set is faster than your speed. To prevent problems your interval has been set to your speed+safety ( "+(t.speed+100)+" )"),t.interval=t.speed+100,B("interval under safety limit, increase to speed + 100ms","w")),u=a("#hexslide-"+r+"-container"),u.children(".hexslide-control-container").length>=1&&0==t.navigation&&u.children(".hexslide-control-container").remove(),u.children(".indicator-container").length>=1&&0==t.indicators&&u.children(".indicator-container").remove(),(u.children(".hexslide-control-container").length<=0&&1==t.navigation||u.children(".indicator-container").length<=0&&1==t.indicators)&&F(u.children(".hexslide-slide-container").children(".slide"),t,u,!0),t.alwaysShowNav?u.children(".hexslide-control-container").children(".slide-btn").removeClass("hide"):u.children(".hexslide-control-container").children(".slide-btn").addClass("hide"),t.alwaysShowIndicators?u.children(".indicator-container").removeClass("hide"):u.children(".indicator-container").addClass("hide"),t.alwaysShowNav&&!t.pauseOnHover&&t.alwaysShowIndicators?u.removeClass("hexslide-hover"):u.hasClass("hexslide-hover")||u.addClass("hexslide-hover"),u.width(t.width?t.width:n),u.height(t.height?t.height:p),u.css({"max-height":t.maxheight?t.maxheight:"","max-width":t.maxwidth?t.maxwidth:"","min-height":t.minheight?t.minheight:"","min-width":t.minwidth?t.minwidth:""}),B("reinit complete, slideshow "+r+" ready"),u.children(".hexslide-slide-container").children(".slide").hide().css("left",0),u.children(".hexslide-slide-container").children(".slide:first").show(),g[r]=t,t.autoPlay&&(B(r+" autoplay start"),t.shuffle?C(r,t):e[r]=setInterval(function(){I.call(u.find(".hexslide-slide-container"),!0)},t.interval)),"function"==typeof t.callback.start&&t.callback.start()}}else{B("no slideshow detected, creating");var c=a.extend(!0,{},a.fn.hexSlide.defaults,c);c.speed+100>c.interval&&(console.warn("hexSlide Warning: The interval you set is faster than your speed. To prevent problems your interval has been set to your speed+safety ( "+(c.speed+100)+" )"),c.interval=c.speed+100,B("bad interval, increasing to speed + 100ms","w")),j=l[q],k=a(j);var v=q+m;n=k.outerWidth(),p=k.outerHeight(),i=a("<div></div>",{id:"hexslide-"+v+"-container","class":"hexslide"}),B("dummy start"),i.width(c.width?c.width:n),i.height(c.height?c.height:p),i.css({"max-height":c.maxheight?c.maxheight:"","max-width":c.maxwidth?c.maxwidth:"","min-height":c.minheight?c.minheight:"","min-width":c.minwidth?c.minwidth:""}),c.additionalClass.container&&i.addClass(c.additionalClass.container),c.additionalCSS.container&&i.css(c.additionalCSS.container),B("processed additionalCSS and additionalClasses"),!c.pauseOnHover&&c.alwaysShowNav&&c.alwaysShowIndicators||i.addClass("hexslide-hover"),o=a("<div></div>",{"class":"hexslide-slide-container"}),f[v]=k.data("slideshow-src").split("|");var w=[];w[0]=k.attr("src");var x=[];x=k.data("slideshow-src").split("|");for(var y=0;y<x.length;y++)w.push(x[y]);F(w),B("GUI ready"),d=a("<div></div>",{"class":"slide",css:{"background-image":"url("+k.attr("src")+")"},"data-hexslide-id":0}).appendTo(o),B("originalsrc ready"),c.additionalClass.slide&&d.addClass(c.additionalClass.slide),c.additionalCSS.slide&&d.css(c.additionalCSS.slide);for(var z=1,A=0;A<f[v].length;A++)d=a("<div></div>",{"class":"slide",css:{"background-image":"url("+f[v][A]+")"},"data-hexslide-id":z}).appendTo(o),c.additionalClass.slide&&d.addClass(c.additionalClass.slide),c.additionalCSS.slide&&d.css(c.additionalCSS.slide),z++;o.appendTo(i),k.replaceWith(i),B("show replaced"),a("#hexslide-"+v+"-container").children(".hexslide-slide-container").children(".slide:gt(0)").hide(),m++,_G.variable.last_slide_id=m,"function"==typeof c.callback.start&&c.callback.start(),g[v]=c,h[v]={},h[v].moving=!1,D(v)}return _G.preserve.slide_done||(_G.preserve.slide_done=!0,a(b).on("aj_start",function(){B("aj_start found. Clearing all timers");for(var a=0;a<e.length;a++)clearTimeout(e[a]),B("cleared "+a)}),a("body").on("mouseenter",".hexslide.hexslide-hover",function(){var b=g[a(this).attr("id").split("-")[1]];b.pauseOnHover&&E(a(this).attr("id").split("-")[1]),!b.alwaysShowNav&&b.navigation&&a(this).find(".slide-btn").removeClass("hide"),!b.alwaysShowIndicators&&b.indicators&&a(this).find(".indicator-container").removeClass("hide"),B("mouse entered hexslide slideshow bounds")}).on("mouseleave",".hexslide.hexslide-hover",function(){var b=g[a(this).attr("id").split("-")[1]];b.pauseOnHover&&D(a(this).attr("id").split("-")[1]),!b.alwaysShowNav&&b.navigation&&a(this).find(".slide-btn").addClass("hide"),!b.alwaysShowIndicators&&b.indicators&&a(this).find(".indicator-container").addClass("hide"),B("mouse left hexslide slideshow bounds")}),a("body").on("click",".slide-btn",function(){var c;c=a(this).data("slide-direction"),"forward"==c?I.call(this):"backward"==c&&L.call(this),B("directional button clicked")}),a("body").on("click",".indicator",function(){K.call(this),B("indicator clicked")}),B("jQuery event delegation completed, waiting for events.")),this},a.fn.hexSlide.defaults={interval:3e3,speed:500,shuffle:!1,width:!1,height:!1,maxheight:!1,maxwidth:!1,minheight:!1,minwidth:!1,pauseOnHover:!0,autoPlay:!0,navigation:!0,alwaysShowNav:!1,alwaysShowIndicators:!1,stopAutoOnNav:!1,indicators:!0,animation:!1,debug:!1,additionalClass:{slide:!1,container:!1},additionalCSS:{slide:!1,container:!1,nextBtn:!1,nextTxt:!1,prevBtn:!1,prevTxt:!1},callback:{start:function(){}},text:{previous:"Back",next:"Next"}}}(jQuery,window,document);